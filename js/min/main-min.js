function init(){$beerWrapperInterior.css({left:0}),layout()}function layout(){winWidth=$win.width(),winHeight=$win.height(),beerWrapperWidth=$beerWrapper.width(),beerWrapperOffset=$beerWrapper.offset().left,beerWidth=$beer.outerWidth(),$beerWrapperInterior.css({width:beerWidth*$beer.length}),beerWrapperInteriorWidth=$beerWrapperInterior.width(),$beerWrapperInteriorOffset=$beerWrapperInterior.offset().left-beerWrapperOffset,console.log("layout")}function animateLeft(){animating=1,$beerWrapperInteriorOffset=Math.round($beerWrapperInterior.offset().left-beerWrapperOffset),idealSpeed=$beerWrapperInteriorOffset/beerWidth*beersPerSecond,$beerWrapperInterior.animate({left:0},idealSpeed,"easeOutQuad"),$beer.removeClass("hoverable"),console.log("animate left")}function animateRight(){animating=1,$beerWrapperInteriorOffset=Math.round($beerWrapperInterior.offset().left-beerWrapperOffset),idealSpeed=(beerWrapperInteriorWidth-beerWrapperWidth+$beerWrapperInteriorOffset)/beerWidth*-beersPerSecond,$beerWrapperInterior.animate({left:-(beerWrapperInteriorWidth-beerWrapperWidth)},idealSpeed,"easeOutQuad"),$beer.removeClass("hoverable"),console.log("animate right")}function stopAnimation(){animating=0,$beerWrapperInterior.stop(),$beer.addClass("hoverable"),console.log("stop the fucking animation")}var $win=$(window),$body=$("body"),$beerWrapper=$("#beer-wrapper"),$beerWrapperInterior=$("#beer-wrapper-interior"),$beer=$(".beer"),fullSpeed=80,animating=0,lastPosition,hoverSide,idealSpeed=5e3,beersPerSecond=-1e3;$win.resize(layout),$beerWrapper.mouseenter(function(){console.log("mouseover"),$(this).mousemove(function(e){mousemoveX=e.clientX-beerWrapperOffset,hoverSide=.333*beerWrapperWidth>mousemoveX?"left":mousemoveX>.677*beerWrapperWidth?"right":"middle","left"===hoverSide?lastPosition-mousemoveX>0&&0==animating&&!($beerWrapperInteriorOffset>=0)?animateLeft():0>lastPosition-mousemoveX&&1==animating&&!($beerWrapperInteriorOffset>=0)&&stopAnimation():"right"===hoverSide&&(0>lastPosition-mousemoveX&&0==animating&&!(-(beerWrapperInteriorWidth-beerWrapperWidth)>=$beerWrapperInteriorOffset)?animateRight():lastPosition-mousemoveX>0&&1==animating&&!(-(beerWrapperInteriorWidth-beerWrapperWidth)>=$beerWrapperInteriorOffset)&&stopAnimation()),$(".mousemoveX").html(mousemoveX),$(".lastPosition").html(lastPosition),lastPosition=mousemoveX})}),$beerWrapper.mouseleave(function(){1==animating&&stopAnimation(),console.log("hovered off")}),$(".hoverable").mouseover(function(){$beerWrapperInterior.css({width:beerWidth*$beer.length+85})}),$(".hoverable").mouseout(function(){$beerWrapperInterior.css({width:beerWidth*$beer.length})}),init();